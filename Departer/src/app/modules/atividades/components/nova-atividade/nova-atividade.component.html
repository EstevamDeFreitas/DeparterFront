<div class="container">
  <div class="d-flex justify-content-between mt-5">
    <div class="custom-flex">
      <p class="titulo">Nova atividade</p>
    </div>
    <div class="custom-flex">
      <a>
        <div class="titulo botao" (click)="cancelar()">
          Cancelar
        </div>
      </a>
    </div>
  </div>

  <div class="card mt-3 mb-3">
    <form [formGroup]="atividadeForm">
      <div class="col-12">
        <label class="label-text">Titulo:</label>
        <div class="form-floating">
          <input type="text" id="inputCategoria" class="form-control form-control-lg" [ngClass]="cssValidator(f.titulo)"
            placeholder="categoria" formControlName="titulo" />
          <label for="inputCategoria" class="label-input">Escreva um titulo</label>
          <div *ngIf="f.titulo.errors?.required && f.titulo.touched" class="invalid-feedback">
            Titulo é obrigatorio.
          </div>
        </div>
      </div>

      <div class="col-12 mt-3">
        <label class="label-text">Descrição:</label>
        <div class="form-floating">
          <textarea class="form-control form-control-descricao" placeholder="Leave a comment here" id="inputDescricao"
            formControlName="descricao" [ngClass]="cssValidator(f.descricao)"></textarea>
          <label for="inputDescricao" class="label-input">Escreva uma descrição</label>
          <div *ngIf="f.descricao.errors?.required && f.descricao.touched" class="invalid-feedback">
            Descrição é obrigatorio.
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-lg-4 col-8">
          <label class="label-text">Data de entrega</label>
          <div>
            <mat-form-field appearance="fill">
              <mat-label>Escolha a data</mat-label>
              <input matInput [matDatepicker]="picker" placeholder="dd/mm/aaaa" class="mask-date" maxlength="10"
                autocomplete="off" [min]="dataAtual" [ngClass]="cssValidator(f.dataEntrega)" [(ngModel)]="data" (keyup.enter)="maskDate()" (input)="maskDate()"
                (dateChange)="maskDate()" formControlName="dataEntrega">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
        <div class="col-lg-2 col-4 pe-5">
          <label class="label-text">Horas Previstas</label>
          <div class="form-floating">
            <input type="text" id="inputCategoria" class="form-control form-control-lg"
              [ngClass]="cssValidator(f.tempoPrevisto)" placeholder="categoria" formControlName="tempoPrevisto" />
            <label for="inputCategoria" class="label-input">Horas / Minutos</label>
            <div *ngIf="f.tempoPrevisto.errors?.required && f.tempoPrevisto.touched" class="invalid-feedback">
              Previsão é obrigatorio.
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-12">
          <label class="label-text">Categorias:</label>
          <div class="d-flex box-tags" *ngIf="categorias.length != 0">
            <div class="d-flex justify-content-center tags-border me-2 mb-2" id="categoria{{i}}" (mouseover)="hoverNaCategoria(i, 1)" (mouseleave)="hoverNaCategoria(i, 2)"
              [ngStyle]="{'background-color': categoria.cor}" *ngFor="let categoria of categorias; let i = index;">
              <div class="text-center text-break">{{categoria.nome}} <i id="icon{{i}}" class="ms-2 fa fa-trash clickable hide" (click)="excluirCategoria(categoria.id)"></i></div>
            </div>
          </div>
          <div class="d-flex justify-content-center justify-content-sm-start mt-2">
            <div class="d-flex justify-content-center tag-add-border me-3 clickable" (click)="openCategoriasDialog()">
              <div class="tag-add text-center text-break">+ Adicionar</div>
            </div>
          </div>
        </div>

      </div>
    </form>

    <div class="row mt-3">
      <div class="col-lg-6 col-12 mb-2">
        <label class="label-text mt-4">Equipe:</label>

        <div class="mt-3 default-text">
          <div class="mt-2" *ngFor="let funcionario of funcionarios">
            <img class="image-circle me-2" src=".\assets\images\icone.circulo.svg" width="25" height="23" />
              {{funcionario.apelido}}
          </div>
        </div>

        <div class="mt-3">
          <button class="light-button" (click)="openFuncionarioDialog()"> + Adicionar </button>
        </div>

      </div>

      <div class="col-lg-6 col-12">
        <div class="subtitulo">
          Com base em seu perfil...
        </div>

        <div class="mt-3">
          <div class="">
            Atividades similares, indicam que é possível terminar a atividade em 7:15
          </div>
          <div class="mt-1">
            Com seu calendário atual é recomendado dar inicio a atividade em 03/04/2022
          </div>

          <div class="mt-1">
            Essa atividade não se encaixa nos paramêtros do planejamento atual
          </div>
        </div>

      </div>
    </div>

    <div class="col-12 mt-3">
      <button class="blue-button" (click)="atividadeCriada()"> Criar Atividade </button>
    </div>


  </div>
</div>

